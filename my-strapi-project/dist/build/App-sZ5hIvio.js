import{u as S,a as A,b as F,r as m,c as B,P as O,j as e,d as l,L as u,F as C,e as H,f as N,C as U,g as G}from"./strapi-CIRK5K0V.js";import{u as W,a as Q,b as _,g as a,T as q,c as z,d as w,e as D,f as c,h as J,i as h,F as K,I as f,E as X,D as Y,L as Z}from"./getTrad-COKS6NMK.js";const ne=()=>{const{formatMessage:t}=S(),{toggleNotification:i}=A(),{formatAPIError:x}=F(),{data:n,isLoading:v,isError:P}=W(),[R]=Q(),[y]=_(),[d,g]=m.useState(!1),[p,L]=m.useState(),{allowedActions:o,isLoading:M}=B(O),$=v||M,T=4,I=(n?.docVersions?.length||0)+1,V=s=>{R({version:s}).unwrap().then(()=>{i({type:"success",message:t({id:a("notification.generate.success"),defaultMessage:"Successfully generated documentation"})})}).catch(r=>{i({type:"warning",message:x(r)})})},k=async()=>{p&&(await y({version:p}).unwrap().then(()=>{i({type:"success",message:t({id:a("notification.delete.success"),defaultMessage:"Successfully deleted documentation"})})}).catch(s=>{i({type:"warning",message:x(s)})}),g(!d))},E=s=>{L(s),g(!d)},j=t({id:a("plugin.name"),defaultMessage:"Documentation"});return $?e.jsx(l.Loading,{}):P?e.jsx(l.Error,{}):e.jsxs(u.Root,{children:[e.jsx(l.Title,{children:j}),e.jsxs(l.Main,{children:[e.jsx(u.Header,{title:j,subtitle:t({id:a("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.jsx(ee,{disabled:!o.canRead||!n?.currentVersion||!n?.prefix,href:b(`${n?.prefix}/v${n?.currentVersion}`),startIcon:e.jsx(C,{}),children:t({id:a("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})})}),e.jsx(u.Content,{children:n?.docVersions.length?e.jsxs(q,{colCount:T,rowCount:I,children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(D,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:t({id:a("pages.PluginPage.table.version"),defaultMessage:"Version"})})}),e.jsx(D,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:t({id:a("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"})})})]})}),e.jsx(J,{children:n.docVersions.slice(0).sort((s,r)=>s.generatedDate<r.generatedDate?1:-1).map(s=>e.jsxs(w,{children:[e.jsx(h,{width:"50%",children:e.jsx(c,{children:s.version})}),e.jsx(h,{width:"50%",children:e.jsx(c,{children:s.generatedDate})}),e.jsx(h,{children:e.jsxs(K,{justifyContent:"end",onClick:r=>r.stopPropagation(),children:[e.jsx(f,{tag:"a",disabled:!o.canRead,href:b(`${n.prefix}/v${s.version}`),variant:"ghost",target:"_blank",rel:"noopener noreferrer",label:t({id:a("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${s.version}`}),children:e.jsx(C,{})}),o.canRegenerate?e.jsx(f,{onClick:()=>V(s.version),variant:"ghost",label:t({id:a("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${s.version}`}),children:e.jsx(H,{})}):null,o.canUpdate&&s.version!==n.currentVersion?e.jsx(f,{onClick:()=>E(s.version),variant:"ghost",label:t({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${s.version}`}),children:e.jsx(N,{})}):null]})})]},s.version))})]}):e.jsx(X,{content:"",icon:null})}),e.jsx(Y.Root,{open:d,onOpenChange:g,children:e.jsx(U,{onConfirm:k})})]})]})},ee=G(Z)`
  text-decoration: none;
`,b=t=>t.startsWith("http")?t:t.startsWith("/")?`${window.strapi.backendURL}${t}`:`${window.strapi.backendURL}/${t}`;export{ne as App};
